<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Neutro UI Test</title>
</head>
<body>
  <span id='root'></span>
</body>
</html>

<script type='module'>
  import { c, store, watch, storeIndex } from '../src/index.js'

  const Counter = ({ ref, initialCount = 0 }) => {
    console.log(storeIndex)
    const count = store(initialCount)

    watch(() => {
      ref.html(`
        <button class='counter'>
          ${count.val}
        </button>
      `)

      ref.select('button').on('click', () => count.val++)
    })
  }

  const App = ({ ref }) => {
    const str = store('a')

    const counter1 = c()
    const counter2 = c()

    watch(() => {
      ref.html(`
        <section>
          <h1>Counter</h1>
          <button id='btn'>${str.val}</button>
          ${counter1.ref()}
          ${counter2.ref()}
        </section>
      `)

      c('#btn').on('click', () => str.val += 'a')

      Counter({ ref: counter1 })

      Counter({ ref: counter2, initialCount: 2 })
    })
  }

  App({ ref: c('#root') })
</script>

<style>
  * {
    margin: 0;
    padding: 0;
    border: 0;
    box-sizing: border-box;
  }

  html {
    font-family: sans-serif;
  }

  section {
    display: flex;
    gap: 1rem;
    padding: 2rem;
  }

  .counter {
    font-size: 1rem;
    display: inline-block;
    background-color: #0a0a0a;
    color: #fafafa;
    padding: 1rem 2rem;
    border-radius: 9999px;
    transition: 0.2s;
    cursor: pointer;
  }

  .counter:hover {
    background-color: #2a2a2a;
  }
</style>