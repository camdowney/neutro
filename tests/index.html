<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>Neutro UI Test</title>
</head>
<body>
</body>
</html>

<script type='module'>
  import { uid, select, store, subscribe } from '../src/index.js'

  const Counter = (root, { initialCount = 0 }) => {
    const count = store(initialCount)

    subscribe(() => {
      root.children(`
        <button class='counter'>
          ${count()}
        </button>
      `)

      root.select('button').on('click', () => {
        count(count() + 1)
      })
    })
  }

  // const App = () => {
  //   const [str, setStr] = useState('a')

  //   return (
  //     <section>
  //       <h1>Counter</h1>
  //       <button onClick={() => setStr(str + 'a')}>{str}</button>
  //       <Counter />
  //       <Counter initialCount={2} />
  //     </section>
  //   )
  // }

  const App = root => {
    const btn = uid()
    const counter1 = uid()
    const counter2 = uid()

    const str = store('a')

    subscribe(() => {
      root.children(`
        <section>
          <h1>Counter</h1>
          <button ${btn()}>${str()}</button>
          <span ${counter1()}></span>
          <span ${counter2()}></span>
        </section>
      `)

      select(btn).on('click', () => str(str() + 'a'))

      Counter(select(counter1), { initialCount: 1 })

      Counter(select(counter2), { initialCount: 2 })
    })
  }

  // const App = root => {
  //   const btn = create(`<button ${btn()}>${str()}</button>`)
  //   const counter1 = create(Counter())
  //   const counter2 = create(Counter({ intitialCount: 2 }))

  //   const str = store('a')

  //   subscribe(() => {
  //     root.children(`
  //       <section>
  //         $
  //         ${counter1()}>
  //         ${counter2()}>
  //       </section>
  //     `)

  //     select(btn).on('click', () => str(str() + 'a'))
  //   })
  // }

  App(select(document.body))
</script>

<style>
  * {
    margin: 0;
    padding: 0;
    border: 0;
    box-sizing: border-box;
  }

  html {
    font-family: sans-serif;
  }

  section {
    display: flex;
    gap: 1rem;
    padding: 2rem;
  }

  .counter {
    font-size: 1rem;
    display: inline-block;
    background-color: #0a0a0a;
    color: #fafafa;
    padding: 1rem 2rem;
    border-radius: 9999px;
    transition: 0.2s;
    cursor: pointer;
  }

  .counter:hover {
    background-color: #2a2a2a;
  }
</style>