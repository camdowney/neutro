const s=(e,t)=>e.dispatchEvent(new Event(t)),b=({r:e,...t})=>{let r={},n={},o={};Object.entries(t).forEach((([e,t])=>e.startsWith("__")?r[e.substring(2)]=t:e.startsWith("_")?n[e.substring(1)]=t:o[e]=t));const s=document.createElement(e||"div");Object.entries(o).forEach((([e,t])=>s.setAttribute(e.replaceAll("_","-"),t)));const c=([e,t])=>s.addEventListener(e,t);return Object.entries(r).forEach((([e,t])=>{c(["mount",()=>window.addEventListener(e,t)]),c(["unmount",()=>window.removeEventListener(e,t)])})),Object.entries(n).forEach(c),s};let a={},c=[],d=0,f=0;export const render=(e,t,r)=>{if(!e||void 0===t)return;const n="string"!=typeof e?e:document?.querySelector(e);if("function"==typeof t)return render(n,{r:t},r);if(Array.isArray(t))return t.forEach((e=>render(n,e)));if("object"!=typeof t)return n.innerHTML+=t;const{r:o,...i}=t,a="function"==typeof o;a&&(f=0);const u=a?o({uid:"_"+d,...i}):t,{c:l,...p}="object"!=typeof u||Array.isArray(u)?{r:"span",c:u}:u;let h=null;if(r){const e=n.parentNode,t=[...e.children].indexOf(n);s(n,"unmount"),n.querySelectorAll("*").forEach((e=>s(e,"unmount"))),e.replaceChild(b(p),n),h=e.children[t]}else n.append(b(p)),h=n.lastChild;a&&(c[d++]={e:h,props:t}),void 0!==l&&render(h,l),s(h,"mount")};export const store=e=>{const t=d,r=`${t}-${f++}`;a[r]||(a[r]=e);return[a[r],e=>{a[r]="function"==typeof e?e(a[r]):e;const{e:n,props:o}=c[t];d=t,render(n,o,!0),d=c.length}]};export const memo=(e,t)=>{const r=`${d}-${f++}`,n=Array.isArray(t)?t:[];return a[r]&&!a[r].deps.some(((e,t)=>e!==n[t]))||(a[r]={value:e(),deps:n}),a[r].value};