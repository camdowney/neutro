const e=(e,t)=>e.dispatchEvent(new Event(t)),t=({r:e,...t})=>{let n={},r={},o={};Object.entries(t).forEach((([e,t])=>e.startsWith("__")?n[e.substring(2)]=t:e.startsWith("_")?r[e.substring(1)]=t:o[e]=t));const c=document.createElement(e||"div");Object.entries(o).forEach((([e,t])=>c.setAttribute(e.replaceAll("_","-"),t)));const i=e=>c.addEventListener(...e);return Object.entries(n).forEach((e=>{i(["mount",()=>window.addEventListener(...e)]),i(["unmount",()=>window.removeEventListener(...e)])})),Object.entries(r).forEach(i),c};let n={},r=[],o=0,c=0;const i=e=>{const t=o,i=`${t}-${c++}`;return n[i]||(n[i]=e),{set value(e){n[i]="function"==typeof e?e(n[i]):e,o=t,s(...r[t],!0),o=r.length},get value(){return n[i]}}},s=(n,u,a)=>{if(!n||void 0===u)return;const l="string"!=typeof n?n:document?.querySelector(n);if("function"==typeof u)return s(l,{r:u},a);if(Array.isArray(u))return u.forEach((e=>s(l,e)));if("object"!=typeof u)return l.innerHTML+=u;const f="function"==typeof u?.r;f&&(c=0);const d=f?u?.r({uid:"_"+o,store:i,...u}):u,h="object"==typeof d&&!Array.isArray(d),{c:p,...y}=h?d:{r:"span",c:d};let E=null;if(a){const n=l.parentNode,r=[...n.children].indexOf(l);e(l,"unmount"),l.querySelectorAll("*").forEach((t=>e(t,"unmount"))),n.replaceChild(t(y),l),E=n.children[r]}else l.append(t(y)),E=l.lastChild;f&&(r[o++]=[E,u]),s(E,p),e(E,"mount")};export{s as default};
