const a=(e,t)=>e.dispatchEvent(new Event(t)),b=({r:e,...t})=>{let n={},r={},c={};Object.entries(t).forEach((([e,t])=>e.startsWith("__")?n[e.substring(2)]=t:e.startsWith("_")?r[e.substring(1)]=t:c[e]=t));const o=document.createElement(e||"div");Object.entries(c).forEach((([e,t])=>o.setAttribute(e.replaceAll("_","-"),t)));const i=e=>o.addEventListener(...e);return Object.entries(n).forEach((e=>{i(["mount",()=>window.addEventListener(...e)]),i(["unmount",()=>window.removeEventListener(...e)])})),Object.entries(r).forEach(i),o};let c={},d=[],f=0,g=0;const h=e=>{const t=f,n=`${t}-${g++}`;c[n]||(c[n]=e);return[c[n],e=>{c[n]="function"==typeof e?e(c[n]):e,f=t,j(...d[t],!0),f=d.length}]},i=(e,t=[])=>{const n=`${f}-${g++}`;return c[n]&&!c[n].dependencies.some(((e,n)=>e!==t[n]))||(c[n]={value:e(),dependencies:t}),c[n].value},j=(e,t,n)=>{if(!e||void 0===t)return;const r="string"!=typeof e?e:document?.querySelector(e);if("function"==typeof t)return j(r,{r:t},n);if(Array.isArray(t))return t.forEach((e=>j(r,e)));if("object"!=typeof t)return r.innerHTML+=t;const c="function"==typeof t?.r;c&&(g=0);const o=c?t?.r({uid:"_"+f,store:h,memo:i,...t}):t,s="object"==typeof o&&!Array.isArray(o),{c:u,...l}=s?o:{r:"span",c:o};let p=null;if(n){const e=r.parentNode,t=[...e.children].indexOf(r);a(r,"unmount"),r.querySelectorAll("*").forEach((e=>a(e,"unmount"))),e.replaceChild(b(l),r),p=e.children[t]}else r.append(b(l)),p=r.lastChild;c&&(d[f++]=[p,t]),j(p,u),a(p,"mount")},render=j;export default render;