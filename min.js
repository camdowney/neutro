const e=(e,t)=>e.dispatchEvent(new Event(t)),t=({r:e,...t})=>{let n={},r={},o={};Object.entries(t).forEach((([e,t])=>e.startsWith("__")?n[e.substring(2)]=t:e.startsWith("_")?r[e.substring(1)]=t:o[e]=t));const c=document.createElement(e||"div");Object.entries(o).forEach((([e,t])=>c.setAttribute(e.replaceAll("_","-"),t)));const s=e=>c.addEventListener(...e);return Object.entries(n).forEach((e=>{s(["mount",()=>window.addEventListener(...e)]),s(["unmount",()=>window.removeEventListener(...e)])})),Object.entries(r).forEach(s),c};let n={},r=[],o=0,c=0;const s=e=>{const t=o,s=`${t}-${c++}`,i={};return n[s]||(n[s]=e),Object.defineProperty(i,"value",{set:e=>{n[s]="function"==typeof e?e(n[s]):e,o=t,u(...r[t],!0),o=r.length},get:()=>n[s]}),i},i=(e,t=[])=>{const r=`${o}-${c++}`;return n[r]&&!n[r].d.some(((e,n)=>e!==t[n]))||(n[r]={v:e(),d:t}),n[r].v},u=(n,a,d)=>{if(!n||void 0===a)return;const f="string"!=typeof n?n:document?.querySelector(n);if("function"==typeof a)return u(f,{r:a},d);if(Array.isArray(a))return a.forEach((e=>u(f,e)));if("object"!=typeof a)return f.innerHTML+=a;const l="function"==typeof a?.r;l&&(c=0);const p=l?a?.r({uid:"_"+o,store:s,memo:i,...a}):a,h="object"==typeof p&&!Array.isArray(p),{c:y,...m}=h?p:{r:"span",c:p};let E=null;if(d){const n=f.parentNode,r=[...n.children].indexOf(f);e(f,"unmount"),f.querySelectorAll("*").forEach((t=>e(t,"unmount"))),n.replaceChild(t(m),f),E=n.children[r]}else f.append(t(m)),E=f.lastChild;l&&(r[o++]=[E,a]),u(E,y),e(E,"mount")};export{u as default};
