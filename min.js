const t=(t,e)=>t.dispatchEvent(new Event(e)),e=({r:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const c=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>c.setAttribute(t.replaceAll("_","-"),e)));const s=t=>c.addEventListener(...t);return Object.entries(n).forEach((t=>{s(["mount",()=>window.addEventListener(...t)]),s(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(s),c};let n={},r=[],o=0,c=0;const s=t=>{const e=o,s=`${e}-${c++}`;n[s]||(n[s]=t);return[n[s],t=>{n[s]="function"==typeof t?t(n[s]):t,o=e,u(...r[e],!0),o=r.length}]},i=(t,e=[])=>{const r=`${o}-${c++}`;return n[r]&&!n[r].d.some(((t,n)=>t!==e[n]))||(n[r]={v:t(),d:e}),n[r].v},u=(n,a,d)=>{if(!n||void 0===a)return;const f="string"!=typeof n?n:document?.querySelector(n);if("function"==typeof a)return u(f,{r:a},d);if(Array.isArray(a))return a.forEach((t=>u(f,t)));if("object"!=typeof a)return f.innerHTML+=a;const l="function"==typeof a?.r;l&&(c=0);const h=l?a?.r({uid:"_"+o,store:s,memo:i,...a}):a,p="object"==typeof h&&!Array.isArray(h),{c:m,...y}=p?h:{r:"span",c:h};let E=null;if(d){const n=f.parentNode,r=[...n.children].indexOf(f);t(f,"unmount"),f.querySelectorAll("*").forEach((e=>t(e,"unmount"))),n.replaceChild(e(y),f),E=n.children[r]}else f.append(e(y)),E=f.lastChild;l&&(r[o++]=[E,a]),u(E,m),t(E,"mount")};export{u as default};
