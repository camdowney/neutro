const t=(t,e)=>t.dispatchEvent(new Event(e)),e=({tag:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const c=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>c.setAttribute(t.replaceAll("_","-"),e)));const i=t=>c.addEventListener(...t);return Object.entries(n).forEach((t=>{i(["mount",()=>window.addEventListener(...t)]),i(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(i),c};let n={},r=[],o=0,c=0;const i=t=>{const e=o,i=`${e}-${c++}`;return n[i]||(n[i]=t),{set value(t){n[i]="function"==typeof t?t(n[i]):t,o=e,s(...r[e],!0),o=r.length},get value(){return n[i]}}},s=(n,a,u)=>{if(!n||void 0===a)return;const l="string"!=typeof n?n:document?.querySelector(n);if("function"==typeof a)return s(l,{tag:a},u);if(Array.isArray(a))return a.forEach((t=>s(l,t)));if("object"!=typeof a)return l.innerHTML+=a;const f="function"==typeof a?.tag;f&&(c=0);const d=f?a?.tag({uid:"_"+o,store:i,...a}):a,h="object"==typeof d&&!Array.isArray(d),{c:p,...y}=h?d:{tag:"span",c:d};let E=null;if(u){const n=l.parentNode,r=[...n.children].indexOf(l);t(l,"unmount"),l.querySelectorAll("*").forEach((e=>t(e,"unmount"))),n.replaceChild(e(y),l),E=n.children[r]}else l.append(e(y)),E=l.lastChild;f&&(r[o++]=[E,a]),s(E,p),t(E,"mount")};export{s as default};
