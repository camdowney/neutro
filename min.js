const t=({tag:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const s=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>s.setAttribute(t.replace(/_/g,"-"),e)));const c=t=>s.addEventListener(...t);return Object.entries(n).forEach((t=>{c(["mount",()=>window.addEventListener(...t)]),c(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(c),s};let e={},n={},r=0,o=[-1];const s=(t,e)=>t.dispatchEvent(new Event(e)),c=()=>"r"+o.join("r"),i=t=>{const s=[...o],i=c(),u=i+"s"+r++;n[u]=n[u]??t;const l=()=>{o=[...s],o[o.length-1]--,a(...e[i],!0)};return{set value(t){n[u]=t,l()},get value(){return n[u]},signal:l}},a=(n,u,l)=>{if(!n||void 0===u)return;const f="string"==typeof n?document?.querySelector(n):n;if("function"==typeof u)return a(f,{tag:u},l);if(Array.isArray(u))return u.forEach((t=>a(f,t)));if(o[o.length-1]++,null===u||!1===u)return;if("object"!=typeof u)return f.append(u);const d="function"==typeof u?.tag,h=c();d&&(r=0);const p=d?u?.tag({ref:()=>e[h][0],store:i,...u}):u,{c:g,...E}="object"!=typeof p||Array.isArray(p)?{tag:"span",c:p}:p;let y=null;if(l){const e=f.parentNode,n=[...e.children].indexOf(f);s(f,"unmount"),f.querySelectorAll("*").forEach((t=>s(t,"unmount"))),e.replaceChild(t(E),f),y=e.children[n]}else f.append(t(E)),y=f.lastChild;d&&(e[h]=[y,u]);const v=[...o];o.push(-1),a(y,g),s(y,"mount"),o=[...v]};export{a as default};
