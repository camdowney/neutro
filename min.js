const t=({tag:t,html:e,...n})=>{let r={},o={},i={};Object.entries(n).filter((([t,e])=>void 0!==e)).forEach((([t,e])=>t.startsWith("__")?r[t.substring(2)]=e:t.startsWith("_")?o[t.substring(1)]=e:i[t]=e));const s=document.createElement(t||"div");void 0!==e&&(s.innerHTML=e),Object.entries(i).forEach((([t,e])=>s.setAttribute(t.replace(/_/g,"-"),e)));const a=t=>s.addEventListener(...t);return Object.entries(r).forEach((t=>{a(["mount",()=>window.addEventListener(...t)]),a(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(o).forEach(a),s};let e={},n=0,r=[-1];const o=(t,e)=>t.dispatchEvent(new Event(e)),i=(s,a,c)=>{if(!s?.nodeType||void 0===a)return;if("function"==typeof a)return i(s,{tag:a},c);if(Array.isArray(a))return a.forEach((t=>i(s,t)));if(r[r.length-1]++,null===a||!1===a)return;if("object"!=typeof a)return s.append(a);const u="function"==typeof a?.tag;let l=null;u&&(n=0);const d=u?a.tag({ref:()=>l,store:t=>{const o=[...r],s="n"+r.join("n")+"s"+n++;e[s]=e[s]??t;const c=()=>{r=[...o],r[r.length-1]--,i(l,a,!0)};return{set value(t){e[s]=t,c()},get value(){return e[s]},signal:c}},...a}):a,{c:f,...h}=Array.isArray(d)?{tag:"span",c:d}:d;if(c){const e=s.parentNode,n=[...e.children].indexOf(s);o(s,"unmount"),s.querySelectorAll("*").forEach((t=>o(t,"unmount"))),e.replaceChild(t(h),s),l=e.children[n]}else s.append(t(h)),l=s.lastChild;const p=[...r];r.push(-1),i(l,f),o(l,"mount"),r=[...p]};export{i as default};
