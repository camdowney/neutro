const t=({tag:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const s=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>s.setAttribute(t.replace(/_/g,"-"),e)));const c=t=>s.addEventListener(...t);return Object.entries(n).forEach((t=>{c(["mount",()=>window.addEventListener(...t)]),c(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(c),s};let e={},n={},r=0,o=[-1];const s=(t,e)=>t.dispatchEvent(new Event(e)),c=()=>"n"+o.join("n"),i=t=>{const s=[...o],i=c(),u=i+"s"+r++;n[u]=n[u]??t;const l=()=>{o=[...s],o[o.length-1]--,a(...e[i],!0)};return{set value(t){n[u]=t,l()},get value(){return n[u]},signal:l}},a=(n,u,l)=>{if(!n?.nodeType||void 0===u)return;if("function"==typeof u)return a(n,{tag:u},l);if(Array.isArray(u))return u.forEach((t=>a(n,t)));if(o[o.length-1]++,null===u||!1===u)return;if("object"!=typeof u)return n.append(u);const f="function"==typeof u?.tag,d=c();f&&(r=0);const h=f?u.tag({ref:()=>e[d][0],store:i,...u}):u,{c:p,...g}="object"!=typeof h||Array.isArray(h)?{tag:"span",c:h}:h;let E=null;if(l){const e=n.parentNode,r=[...e.children].indexOf(n);s(n,"unmount"),n.querySelectorAll("*").forEach((t=>s(t,"unmount"))),e.replaceChild(t(g),n),E=e.children[r]}else n.append(t(g)),E=n.lastChild;f&&(e[d]=[E,u]);const v=[...o];o.push(-1),a(E,p),s(E,"mount"),o=[...v]};export{a as default};
