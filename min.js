let a=0,b=[],d=0,f=[],g=0;const select=(e,s)=>"string"==typeof s?e.querySelector(s):e;export const c=e=>{const s="u"+a++,t=()=>select(document,e??`#${s}`);return{value:()=>t(),ref:()=>e?"Cannot insert ref for existing element":`<span id="${s}"></span>`,html:e=>t().innerHTML=e,select:e=>c(select(t(),e)),on:(e,s)=>t().addEventListener(e,s)}};export const store=e=>{const s=d++,t=g;return b[s]||(b[s]=e),e=>{if(void 0===e)return b[s];b[s]=e;const n=d;d=s,f[t].forEach((e=>e())),d=n,console.log(b)}};export const watch=e=>{const s=g++;f[s]||(f[s]=[]);f[s].push((()=>{const t=g;g=s,e(),b[0].length>10&&(document.body.innerHTML=""),g=t})),e()};