const e=(e,t)=>e.dispatchEvent(new Event(t)),t=({r:e,...t})=>{let n={},r={},o={};Object.entries(t).forEach((([e,t])=>e.startsWith("__")?n[e.substring(2)]=t:e.startsWith("_")?r[e.substring(1)]=t:o[e]=t));const c=document.createElement(e||"div");Object.entries(o).forEach((([e,t])=>c.setAttribute(e.replaceAll("_","-"),t)));const s=e=>c.addEventListener(...e);return Object.entries(n).forEach((e=>{s(["mount",()=>window.addEventListener(...e)]),s(["unmount",()=>window.removeEventListener(...e)])})),Object.entries(r).forEach(s),c};let n={},r=[],o=0,c=0;const s=e=>{const t=o,s=`${t}-${c++}`;n[s]||(n[s]=e);return[n[s],e=>{n[s]="function"==typeof e?e(n[s]):e,o=t,u(...r[t],!0),o=r.length}]},i=(e,t=[])=>{const r=`${o}-${c++}`;return n[r]&&!n[r].dependencies.some(((e,n)=>e!==t[n]))||(n[r]={value:e(),dependencies:t}),n[r].value},u=(n,a,d)=>{if(!n||void 0===a)return;const l="string"!=typeof n?n:document?.querySelector(n);if("function"==typeof a)return u(l,{r:a},d);if(Array.isArray(a))return a.forEach((e=>u(l,e)));if("object"!=typeof a)return l.innerHTML+=a;const f="function"==typeof a?.r;f&&(c=0);const p=f?a?.r({uid:"_"+o,store:s,memo:i,...a}):a,h="object"==typeof p&&!Array.isArray(p),{c:m,...y}=h?p:{r:"span",c:p};let E=null;if(d){const n=l.parentNode,r=[...n.children].indexOf(l);e(l,"unmount"),l.querySelectorAll("*").forEach((t=>e(t,"unmount"))),n.replaceChild(t(y),l),E=n.children[r]}else l.append(t(y)),E=l.lastChild;f&&(r[o++]=[E,a]),u(E,m),e(E,"mount")};export{u as default}