const t=({tag:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const c=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>c.setAttribute(t.replace(/_/g,"-"),e)));const s=t=>c.addEventListener(...t);return Object.entries(n).forEach((t=>{s(["mount",()=>window.addEventListener(...t)]),s(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(s),c};let e=[],n={},r=0,o=0;const c=(t,e)=>{t.dispatchEvent(new Event(e))},s=(a,i,u)=>{if(!a||void 0===i)return;const d="string"==typeof a?document?.querySelector(a):a;if("function"==typeof i)return s(d,{tag:i},u);if(Array.isArray(i))return i.forEach((t=>s(d,t)));if("object"!=typeof i)return d.appendChild(document.createTextNode(i));const l=r,f="function"==typeof i?.tag;f&&(o=0);const h=f?i?.tag({ref:()=>e[l][0],store:t=>{const c=l+"-"+o++;return n[c]=n[c]??t,{set value(t){n[c]=t,r=l,s(...e[l],!0),r=e.length},get value(){return n[c]}}},...i}):i,{c:p,...E}="object"!=typeof h||Array.isArray(h)?{tag:"span",c:h}:h;let g=null;if(u){const e=d.parentNode,n=[...e.children].indexOf(d);c(d,"unmount"),d.querySelectorAll("*").forEach((t=>c(t,"unmount"))),e.replaceChild(t(E),d),g=e.children[n]}else d.append(t(E)),g=d.lastChild;f&&(e[r++]=[g,i]),s(g,p),c(g,"mount")};export{s as default};
