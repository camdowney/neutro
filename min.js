const t=(t,e)=>{t.dispatchEvent(new Event(e))},e=({tag:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const c=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>c.setAttribute(t.replaceAll("_","-"),e)));const s=t=>c.addEventListener(...t);return Object.entries(n).forEach((t=>{s(["mount",()=>window.addEventListener(...t)]),s(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(s),c};let n=[],r={},o=0,c=0;const s=t=>{const e=o,s=`${e}-${c++}`;return r[s]||(r[s]=t),{set value(t){r[s]=t,o=e,i(...n[e],!0),o=n.length},get value(){return r[s]}}},i=(r,a,u)=>{if(!r||void 0===a)return;const l="string"==typeof r?document?.querySelector(r):r;if("function"==typeof a)return i(l,{tag:a},u);if(Array.isArray(a))return a.forEach((t=>i(l,t)));if("object"!=typeof a)return l.innerHTML+=a;const d="function"==typeof a?.tag;d&&(c=0);const f=d?a?.tag({uid:"_"+o,store:s,...a}):a,h="object"==typeof f&&!Array.isArray(f),{c:p,...E}=h?f:{tag:"span",c:f};let y=null;if(u){const n=l.parentNode,r=[...n.children].indexOf(l);t(l,"unmount"),l.querySelectorAll("*").forEach((e=>t(e,"unmount"))),n.replaceChild(e(E),l),y=n.children[r]}else l.append(e(E)),y=l.lastChild;d&&(n[o++]=[y,a]),i(y,p),t(y,"mount")};export{i as default};
