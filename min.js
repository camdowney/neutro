const t=({tag:t,...e})=>{let n={},r={},o={};Object.entries(e).forEach((([t,e])=>t.startsWith("__")?n[t.substring(2)]=e:t.startsWith("_")?r[t.substring(1)]=e:o[t]=e));const c=document.createElement(t||"div");Object.entries(o).forEach((([t,e])=>c.setAttribute(t.replace(/_/g,"-"),e)));const s=t=>c.addEventListener(...t);return Object.entries(n).forEach((t=>{s(["mount",()=>window.addEventListener(...t)]),s(["unmount",()=>window.removeEventListener(...t)])})),Object.entries(r).forEach(s),c};let e=[],n={},r=0,o=0;const c=(t,e)=>{t.dispatchEvent(new Event(e))},s=t=>{const c=r,s=c+"-"+o++;n[s]=n[s]??t;const a=()=>{r=c,i(...e[c],!0),r=e.length};return{set value(t){n[s]=t,a()},get value(){return n[s]},signal:a}},i=(n,a,u)=>{if(!n||void 0===a)return;if(null===a||!1===a)return;const l="string"==typeof n?document?.querySelector(n):n;if("function"==typeof a)return i(l,{tag:a},u);if(Array.isArray(a))return a.forEach((t=>i(l,t)));if("object"!=typeof a)return l.appendChild(document.createTextNode(a));const d="function"==typeof a?.tag,f=r;d&&(o=0);const h=d?a?.tag({ref:()=>e[f][0],store:s,...a}):a,{c:p,...g}="object"!=typeof h||Array.isArray(h)?{tag:"span",c:h}:h;let E=null;if(u){const e=l.parentNode,n=[...e.children].indexOf(l);c(l,"unmount"),l.querySelectorAll("*").forEach((t=>c(t,"unmount"))),e.replaceChild(t(g),l),E=e.children[n]}else l.append(t(g)),E=l.lastChild;d&&(e[r++]=[E,a]),i(E,p),c(E,"mount")};export{i as default};
