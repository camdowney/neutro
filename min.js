let a=0,b=[],h=0,g=[],f=[],i=0,d=[];export const q=t=>{const s="string"==typeof t?document.querySelector(t):t;return{val:()=>s,html:t=>{s.innerHTML=t;const e=Array.from(b);b=[],e.forEach((t=>t()))},q:t=>q(s.querySelector(t)),on:(t,e)=>s.addEventListener(t,e)}};export const c=t=>{const s=a++;return b.push((()=>t(q(`#u${s}`)))),`<span id="u${s}"></span>`};export const store=t=>{const s=h++,e=i;return g[s]=g[s]??t,{get val(){return f[s]=f[s]??[],f[s].includes(e)||f[s].push(e),g[s]},set val(t){g[s]=t;const e=h;h=s+1,f[s].forEach((t=>d[t]())),h+=e}}};export const watch=t=>{const s=i++;d[s]=()=>{const e=i;i=s+1,t(),i+=e},t()};