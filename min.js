const e=(e,t)=>e.dispatchEvent(new Event(t)),t=({r:e,...t})=>{let n={},r={},o={};Object.entries(t).forEach((([e,t])=>e.startsWith("__")?n[e.substring(2)]=t:e.startsWith("_")?r[e.substring(1)]=t:o[e]=t));const c=document.createElement(e||"div");Object.entries(o).forEach((([e,t])=>c.setAttribute(e.replaceAll("_","-"),t)));const i=e=>c.addEventListener(...e);return Object.entries(n).forEach((e=>{i(["mount",()=>window.addEventListener(...e)]),i(["unmount",()=>window.removeEventListener(...e)])})),Object.entries(r).forEach(i),c};let n={},r=[],o=0,c=0;const i=e=>{const t=o,i=`${t}-${c++}`,u={};return n[i]||(n[i]=e),Object.defineProperty(u,"value",{set:e=>{n[i]="function"==typeof e?e(n[i]):e,o=t,s(...r[t],!0),o=r.length},get:()=>n[i]}),u},s=(n,u,a)=>{if(!n||void 0===u)return;const f="string"!=typeof n?n:document?.querySelector(n);if("function"==typeof u)return s(f,{r:u},a);if(Array.isArray(u))return u.forEach((e=>s(f,e)));if("object"!=typeof u)return f.innerHTML+=u;const l="function"==typeof u?.r;l&&(c=0);const d=l?u?.r({uid:"_"+o,store:i,...u}):u,p="object"==typeof d&&!Array.isArray(d),{c:h,...y}=p?d:{r:"span",c:d};let E=null;if(a){const n=f.parentNode,r=[...n.children].indexOf(f);e(f,"unmount"),f.querySelectorAll("*").forEach((t=>e(t,"unmount"))),n.replaceChild(t(y),f),E=n.children[r]}else f.append(t(y)),E=f.lastChild;l&&(r[o++]=[E,u]),s(E,h),e(E,"mount")};export{s as default};
